---
---

<header class="docs-dock" role="banner">
  <div class="dock-inner">
    <div class="dock-left">
      <nav aria-label="Breadcrumb">
        <ol class="breadcrumb" id="docs-breadcrumb">
          <li><a href="/">ä¸»é¡µ</a></li>
          <li><a href="/docs/">æ–‡æ¡£</a></li>
        </ol>
      </nav>
    </div>

      <div class="dock-center">
        <a class="dock-link" href="/">ç«™ç‚¹</a>
        <a class="dock-link" href="/docs/">æ–‡æ¡£</a>
        <a class="dock-link" href="/about">å…³äºŽ</a>
      </div>

    <div class="dock-right">
      <label class="visually-hidden" for="lang-select">è¯­è¨€</label>
      <select id="lang-select" aria-label="é€‰æ‹©è¯­è¨€">
        <option value="cn">ä¸­æ–‡</option>
        <option value="en">English</option>
      </select>

      <button id="theme-toggle" aria-pressed="false" title="åˆ‡æ¢æ·±è‰²æ¨¡å¼">ðŸŒ™</button>
    </div>
  </div>

  <style>
    .docs-dock{
      width:100%;
      background: white;
      box-shadow: 0 1px 6px rgba(0,0,0,0.04);
      position: sticky;
      top:0;
      z-index: 40;
    }
    .dock-inner{ max-width:1200px; margin:0 auto; padding:0.5rem 1rem; display:flex; align-items:center; gap:1rem; justify-content:space-between }
    .dock-left{ flex:1 }
    .dock-center{ display:flex; gap:0.75rem; flex:1; justify-content:center }
    .dock-right{ display:flex; gap:0.5rem; align-items:center }
    .dock-link{ text-decoration:none; color:rgb(var(--black)); padding:0.25rem 0.5rem }
    .breadcrumb{ display:flex; gap:0.5rem; list-style:none; padding:0; margin:0 }
    .breadcrumb li::after{ content: ">"; margin-left:0.5rem }
    .breadcrumb li:last-child::after{ content:'' }
    select{ padding:0.25rem; border-radius:6px }
    #theme-toggle{ padding:0.25rem 0.6rem; border-radius:6px; background:transparent; border:1px solid rgba(0,0,0,0.06); cursor:pointer }
    .visually-hidden{ position:absolute; left:-10000px; top:auto; width:1px; height:1px; overflow:hidden }

    @media (max-width:900px){ .dock-center{ display:none } }
  </style>

  <script>
    (function(){
      document.addEventListener('DOMContentLoaded', ()=>{
        const btn = document.getElementById('theme-toggle');
        if(btn){
          const stored = localStorage.getItem('theme');
          const root = document.documentElement;
          const isDarkInit = stored === 'dark';
          if(isDarkInit) root.classList.add('dark');
          // set initial button state/text
          btn.setAttribute('aria-pressed', String(isDarkInit));
          btn.textContent = isDarkInit ? 'â˜€ï¸' : 'ðŸŒ™';

          btn.addEventListener('click', ()=>{
            const isDark = root.classList.toggle('dark');
            btn.setAttribute('aria-pressed', String(isDark));
            btn.textContent = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
          });
        }

        // language select logic: preserve path when switching languages
  const langSelect = document.getElementById('lang-select') as HTMLSelectElement | null;
  if(!langSelect) return;
  const path = location.pathname || '/';
        // determine current language
        if(path.startsWith('/en/')){
          langSelect.value = 'en';
        } else {
          langSelect.value = 'cn';
        }

        langSelect.addEventListener('change', (e)=>{
          const target = e.target as HTMLSelectElement;
          const v = (target && target.value) || 'cn';
          const cur = location.pathname;
          if(v === 'en'){
            if(cur.startsWith('/en/')) return; // already en
            // prepend /en
            const target = '/en' + (cur === '/' ? '/' : cur);
            location.href = target;
          } else {
            // switch to chinese: remove leading /en
            if(cur.startsWith('/en/')){
              const target = cur.replace(/^\/en/, '') || '/';
              location.href = target;
            } else return; // already cn
          }
        });

        // Breadcrumb dynamic update: keep ä¸»é¡µ > æ–‡æ¡£ as base, append segments
        try{
          const bc = document.getElementById('docs-breadcrumb');
          if(bc){
            // remove existing extra crumbs (keep first two)
            while(bc.children.length > 2) bc.removeChild(bc.lastElementChild!);
            const curPath = location.pathname;
            // remove /en prefix for logic but remember language
            const isEn = curPath.startsWith('/en/');
            const path = isEn ? curPath.replace(/^\/en/, '') : curPath;
            const parts = path.split('/').filter(Boolean); // e.g. ['docs','getting-started']
            // only append if inside /docs
            if(parts.length > 1 && parts[0] === 'docs'){
              let accum = '';
              for(let i = 1; i < parts.length; i++){
                accum += '/' + parts[i];
                const href = (isEn ? '/en' : '') + '/docs' + accum + '/';
                const seg = parts[i];
                // map common segments to friendly labels
                const labelMapCn: Record<string,string> = { 'getting-started': 'å¿«é€Ÿå¼€å§‹' };
                const labelMapEn: Record<string,string> = { 'getting-started': 'Quickstart' };
                const label = isEn ? (labelMapEn[seg] ?? seg.replace(/-/g,' ')) : (labelMapCn[seg] ?? seg.replace(/-/g,' '));
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = href;
                a.textContent = label;
                li.appendChild(a);
                bc.appendChild(li);
              }
            }
          }
        }catch(e){/* noop */}
      });
    })();
  </script>
</header>
